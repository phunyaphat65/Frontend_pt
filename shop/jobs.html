<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>üíº ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô | Part-time Match</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../common/css/style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    body {
      font-family: "Prompt", sans-serif;
      background: #f8faff;
      color: #333;
      margin: 0;
    }

    .navbar {
      background: linear-gradient(90deg, #667eea, #764ba2);
      color: #fff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 24px;
    }
    .navbar h1 { margin: 0; font-size: 20px; font-weight: 600; }
    .nav-right a { color: white; text-decoration: none; margin: 0 12px; font-weight: 500; }
    .nav-right a:hover, .nav-right a.active { opacity: 0.8; }
    .btn-logout { background: rgba(255,255,255,0.25); border: none; color: white; padding: 8px 14px; border-radius: 8px; cursor: pointer; }
    .btn-logout:hover { background: rgba(255,255,255,0.35); }

    .container {
      max-width: 900px;
      margin: 40px auto;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      padding: 35px 45px;
    }

    .add-job {
      background: linear-gradient(90deg, #667eea, #764ba2);
      color: #fff;
      padding: 10px 18px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      font-size: 15px;
    }

    .job-list {
      display: grid;
      gap: 18px;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      margin-top: 20px;
    }

    .job-card {
      background: #fafbff;
      padding: 20px;
      border-radius: 14px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
      transition: 0.25s;
    }

    .job-card:hover { transform: translateY(-4px); }

    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.4);
      z-index: 1000;
    }
    .modal.hidden { display: none; }

    .modal-content {
      background: #fff;
      border-radius: 14px;
      padding: 25px 30px;
      width: 95%;
      max-width: 600px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
      position: relative;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-content h3 { margin-bottom: 15px; text-align: center; color: #444; }

    .modal-content input, .modal-content textarea, .modal-content select {
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    #map {
      height: 220px;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .modal-content button {
      width: 100%;
      padding: 10px;
      border: none;
      background: linear-gradient(90deg, #667eea, #764ba2);
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
    }

    .modal-close {
      position: absolute;
      top: 10px;
      right: 14px;
      font-size: 20px;
      color: #888;
      cursor: pointer;
    }

    .preview-img {
      width: 100%;
      max-height: 180px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
      display: none;
    }
  </style>
</head>

<body>
  <!-- ‚úÖ Navbar -->
  <nav class="navbar">
    <div class="nav-left"><h1>Part-time Match (‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤)</h1></div>
    <div class="nav-right">
      <a href="matching.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
      <a href="profile.html">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a>
      <a href="jobs.html" class="active">‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a>
      <a href="applications.html">‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</a>
      <a href="matching.html">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà</a>
      <a href="reviews.html">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏£‡πâ‡∏≤‡∏ô</a>
      <button id="logoutBtn" class="btn-logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>
  </nav>

  <div class="container">
    <h2>üíº ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h2>
    <button id="addJobBtn" class="add-job">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
    <div id="jobList" class="job-list"></div>
    <p id="emptyState" style="text-align:center; color:#888; margin-top:20px; display:none;">
      ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
    </p>
  </div>

  <!-- Modal ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô -->
  <div id="jobModal" class="modal hidden">
    <div class="modal-content">
      <span class="modal-close" id="closeModal">&times;</span>
      <h3 id="modalTitle">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</h3>

      <input type="text" id="jobTitle" placeholder="üßæ ‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô" required>
      <textarea id="jobDesc" rows="2" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"></textarea>

      <input type="text" id="jobLocation" placeholder="üìç ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô" required>
      <div id="map"></div>

      <label> ‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô :</label>
      <div style="display:flex; gap:10px;">
        <input type="date" id="jobStart" placeholder="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô">
      </div>
      
      <input type="number" id="jobWage" placeholder="üí∞ ‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á (‡∏ö‡∏≤‡∏ó/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)" required>
      <input type="tel" id="jobContact" placeholder="üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠">

      <label>üñºÔ∏è ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏á‡∏≤‡∏ô (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏£‡∏π‡∏õ):</label>
      <input type="file" id="jobImage" accept="image/*">
      <img id="previewImage" class="preview-img">

      <button id="saveJobBtn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏≤‡∏ô</button>
    </div>
  </div>

  <script>
    const modal = document.getElementById("jobModal");
    const openBtn = document.getElementById("addJobBtn");
    const closeBtn = document.getElementById("closeModal");
    const mapContainer = document.getElementById("map");
    const previewImg = document.getElementById("previewImage");
    let map, marker;

    openBtn.addEventListener("click", () => {
      modal.classList.remove("hidden");
      setTimeout(initMap, 200); // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏±‡∏á modal ‡πÄ‡∏õ‡∏¥‡∏î
    });

    closeBtn.addEventListener("click", () => modal.classList.add("hidden"));

    // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
    document.getElementById("jobImage").addEventListener("change", e => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = evt => {
          previewImg.src = evt.target.result;
          previewImg.style.display = "block";
        };
        reader.readAsDataURL(file);
      }
    });

    function initMap() {
      if (map) return;
      map = L.map('map').setView([13.7563, 100.5018], 12);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap'
      }).addTo(map);

      map.on('click', function(e) {
        if (marker) map.removeLayer(marker);
        marker = L.marker(e.latlng).addTo(map);
        document.getElementById("jobLocation").value = `Lat: ${e.latlng.lat.toFixed(5)}, Lng: ${e.latlng.lng.toFixed(5)}`;
      });
    }
  </script>
</body>
</html>

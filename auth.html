<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <title>Part-time Match ‚Äî ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö / ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    :root{
      --bg-grad: linear-gradient(135deg,#eef4ff,#dfe9ff 60%, #cfcff7 100%);
      --card-bg: #ffffff;
      --primary: #2f5df6;
      --primary-2: #7a6cff;
      --muted: #687281;
      --radius: 14px;
      --shadow: 0 12px 28px rgba(20,30,60,0.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Prompt",sans-serif;
      background:var(--bg-grad);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      color:#1f2937;
    }
    .layout{
      width:100%;
      max-width:1100px;
      display:grid;
      grid-template-columns: 1fr 480px;
      gap:28px;
      align-items:center;
    }
    .card{
      background:var(--card-bg);
      border-radius:var(--radius);
      padding:34px;
      box-shadow:var(--shadow);
    }
    .brand{display:flex;align-items:center;gap:12px;margin-bottom:18px}
    .logo{
      width:46px;height:46px;border-radius:10px;
      background:linear-gradient(135deg,var(--primary),var(--primary-2));
      display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;
      box-shadow: 0 6px 16px rgba(60,80,200,0.12);
    }
    h1.title{font-size:20px;margin:0;color:var(--primary);font-weight:700}
    p.lead{margin:8px 0 18px;color:var(--muted);font-size:14px}
    .views{display:flex;flex-direction:column;gap:18px}
    .view{display:none}
    .view.active{display:block}
    form .row{display:flex;gap:12px}
    form .col{flex:1}
    label{display:block;font-size:13px;color:#374151;margin-bottom:6px;font-weight:500}
    input, select, textarea{
      width:100%;padding:12px;border-radius:10px;border:1px solid #e6e9ef;
      font-size:14px;color:#111827;background:#fff;
      transition:box-shadow .15s, border-color .15s;
    }
    input:focus, select:focus, textarea:focus{
      outline:none;border-color:rgba(47,93,246,0.9);
      box-shadow:0 6px 18px rgba(47,93,246,0.06);
    }
    textarea{min-height:64px;resize:vertical}
    .actions{display:flex;gap:12px;align-items:center;margin-top:10px}
    .btn{padding:12px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:600}
    .btn.primary{background:linear-gradient(90deg,var(--primary),var(--primary-2));color:#fff;flex:1}
    .btn.ghost{background:transparent;color:var(--primary);text-decoration:underline;font-weight:600;border:none}
    .foot{text-align:center;margin-top:10px}
    .hero{
      display:flex;align-items:center;justify-content:center;
      height:100%;border-radius:var(--radius);padding:26px;
      background:linear-gradient(180deg,rgba(255,255,255,0.85),rgba(255,255,255,0.7));
      box-shadow:0 8px 30px rgba(18,38,80,0.06);
    }
    .hero-illustration{width:100%;max-width:380px}
    .pw-wrap{position:relative}
    .pw-toggle{
      position:absolute;right:10px;top:50%;transform:translateY(-50%);
      background:none;border:none;color:var(--muted);cursor:pointer;font-weight:600
    }
    @media (max-width:980px){
      .layout{grid-template-columns:1fr;padding:12px}
      .hero{order:-1;margin-bottom:8px}
    }
  </style>
</head>
<body>
  <div class="layout" role="main">
    <section class="card" aria-labelledby="authTitle">
      <div class="brand">
        <div class="logo">PT</div>
        <div>
          <h1 id="authTitle" class="title">Part-time Match</h1>
          <div class="small">‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏´‡∏≤‡∏á‡∏≤‡∏ô‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÑ‡∏ó‡∏°‡πå ‚Äî ‡πÄ‡∏£‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå</div>
        </div>
      </div>

      <p class="lead">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ‡∏´‡∏£‡∏∑‡∏≠ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà ‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó (‡∏ú‡∏π‡πâ‡∏´‡∏≤‡∏á‡∏≤‡∏ô / ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤)</p>

      <div class="views">
        <!-- LOGIN -->
        <div id="view-login" class="view active">
          <form id="formLogin" novalidate>
            <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
            <input id="loginEmail" type="email" placeholder="you@example.com" required>
            <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
            <div class="pw-wrap">
              <input id="loginPassword" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
              <button type="button" class="pw-toggle" id="toggleLoginPw">‡πÅ‡∏™‡∏î‡∏á</button>
            </div>
            <div class="actions">
              <button class="btn primary" type="submit">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
              <button type="button" class="btn primary" id="toRegister">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
            </div>
            <div class="foot">
              <button type="button" class="btn ghost" id="toForgot">‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?</button>
            </div>
          </form>
        </div>

        <!-- REGISTER -->
        <div id="view-register" class="view">
          <form id="formRegister" novalidate>
            <div class="row">
              <div class="col">
                <label>‡∏ä‡∏∑‡πà‡∏≠ / ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</label>
                <input id="regName" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" required>
              </div>
              <div class="col">
                <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                <input id="regPhone" type="tel" placeholder="0812345678">
              </div>
            </div>

            <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
            <input id="regEmail" type="email" placeholder="you@example.com" required>

            <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
            <div class="pw-wrap">
              <input id="regPassword" type="password" placeholder="‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£" required>
              <button type="button" class="pw-toggle" id="toggleRegPw">‡πÅ‡∏™‡∏î‡∏á</button>
            </div>

            <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
            <textarea id="regAddress" rows="2" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏´‡∏£‡∏∑‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤"></textarea>

            <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
            <textarea id="regDescription" rows="2" placeholder="‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏´‡∏£‡∏∑‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤"></textarea>

            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
            <select id="regRole" required>
              <option value="seeker">‡∏ú‡∏π‡πâ‡∏´‡∏≤‡∏á‡∏≤‡∏ô</option>
              <option value="shop">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</option>
            </select>

            <label style="display:flex;align-items:center;gap:6px;margin-top:8px;font-size:13px;color:#374151;cursor:pointer;">
              <input id="agreeTos" type="checkbox" style="width:16px;height:16px;accent-color:#2f5df6;margin:0;">
              <span>‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
            </label>

            <div class="actions" style="margin-top:12px">
              <button class="btn primary" type="submit">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
              <button type="button" class="btn primary" id="backToLogin1">‡∏Å‡∏•‡∏±‡∏ö</button>
            </div>
          </form>
        </div>

        <!-- FORGOT -->
        <div id="view-forgot" class="view">
          <form id="formForgot" novalidate>
            <div id="step-email">
              <label>‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</label>
              <input id="forgotEmail" type="email" placeholder="you@example.com">
              <div class="actions">
                <button type="button" class="btn primary" id="btnSendOtp">‡∏™‡πà‡∏á OTP</button>
                <button type="button" class="btn primary" id="backToLogin2">‡∏Å‡∏•‡∏±‡∏ö</button>
              </div>
            </div>
            <div id="step-otp" style="display:none;margin-top:10px;">
              <label>‡∏Å‡∏£‡∏≠‡∏Å OTP</label>
              <input id="otpInput" type="text" maxlength="6" placeholder="123456">
              <div class="actions">
                <button type="button" class="btn primary" id="btnVerifyOtp">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô OTP</button>
                <button type="button" class="btn ghost" id="resendOtp">‡∏™‡πà‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
              </div>
            </div>
            <div id="step-newpass" style="display:none;margin-top:10px;">
              <label>‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
              <div class="pw-wrap">
                <input id="newPassword" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà">
                <button type="button" class="pw-toggle" id="toggleNewPw">‡πÅ‡∏™‡∏î‡∏á</button>
              </div>
              <div class="actions">
                <button type="button" class="btn primary" id="btnResetPass">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                <button type="button" class="btn primary" id="backToLogin3">‡∏Å‡∏•‡∏±‡∏ö</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </section>

    <aside class="hero" aria-hidden="true">
      <img class="hero-illustration" src="https://cdn-icons-png.flaticon.com/512/6592/6592852.png" alt="Job search illustration" />
    </aside>
  </div>

  <script>
    (() => {
      const USERS_KEY = "pt_users";
      const SESSION_SEEKER = "pt_seeker_session";
      const SESSION_SHOP = "pt_shop_session";
      const $ = id => document.getElementById(id);
      const loadUsers = () => JSON.parse(localStorage.getItem(USERS_KEY) || "[]");
      const saveUsers = users => localStorage.setItem(USERS_KEY, JSON.stringify(users));
      const hash = s => [...s].reduce((h, c) => Math.imul(31, h) + c.charCodeAt(0) | 0, 0).toString();
      const switchView = id => {
        document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
        $(id).classList.add("active");
      };

      if (localStorage.getItem(SESSION_SHOP)) {
        window.location.href = "./shop/applications.html";
      } else if (localStorage.getItem(SESSION_SEEKER)) {
        window.location.href = "./seeker/matching.html";
      }

      $("formLogin").addEventListener("submit", e => {
        e.preventDefault();
        const email = $("loginEmail").value.trim().toLowerCase();
        const pw = $("loginPassword").value.trim();
        if (!email || !pw) return Swal.fire("‚ö†Ô∏è", "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö", "warning");

        const user = loadUsers().find(u => u.email === email && u.password_hash === hash(pw));
        if (!user) return Swal.fire("‚ùå", "‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á", "error");

        Swal.fire({
          icon: "success",
          title: `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${user.name}`,
          timer: 1000,
          showConfirmButton: false,
        }).then(() => {
          if (user.role === "shop") {
            localStorage.setItem(SESSION_SHOP, user.email);
            location.href = "./shop/applications.html";
          } else {
            localStorage.setItem(SESSION_SEEKER, user.email);
            location.href = "./seeker/matching.html";
          }
        });
      });

      $("formRegister").addEventListener("submit", e => {
        e.preventDefault();
        const name = $("regName").value.trim();
        const email = $("regEmail").value.trim().toLowerCase();
        const pw = $("regPassword").value.trim();
        const phone = $("regPhone").value.trim();
        const address = $("regAddress").value.trim();
        const desc = $("regDescription").value.trim();
        const role = $("regRole").value;
        if (!name || !email || !pw) return Swal.fire("‚ö†Ô∏è", "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö", "warning");
        if (pw.length < 6) return Swal.fire("‚ö†Ô∏è", "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£", "warning");
        if (!$("agreeTos").checked) return Swal.fire("‚ö†Ô∏è", "‡πÇ‡∏õ‡∏£‡∏î‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô", "warning");

        const users = loadUsers();
        if (users.some(u => u.email === email)) return Swal.fire("‚ö†Ô∏è", "‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß", "warning");

        users.push({
          id: Date.now(),
          name,
          email,
          password_hash: hash(pw),
          role,
          phone,
          address,
          description: desc,
          created_at: new Date().toISOString(),
        });
        saveUsers(users);
        Swal.fire("‚úÖ", "‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö", "success").then(() => switchView("view-login"));
      });

      let otp = null, otpEmail = null, exp = 0;

      $("btnSendOtp").onclick = () => {
        const email = $("forgotEmail").value.trim().toLowerCase();
        const users = loadUsers();
        if (!users.some(u => u.email === email)) return Swal.fire("‚ùå", "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö", "error");
        otp = (Math.floor(Math.random() * 900000) + 100000).toString();
        otpEmail = email;
        exp = Date.now() + 5 * 60 * 1000;
        Swal.fire("üì© ‡∏£‡∏´‡∏±‡∏™ OTP ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì", `<b>${otp}</b><br><small>‡∏°‡∏µ‡∏≠‡∏≤‡∏¢‡∏∏ 5 ‡∏ô‡∏≤‡∏ó‡∏µ</small>`, "info");
        $("step-email").style.display = "none";
        $("step-otp").style.display = "block";
      };

      $("btnVerifyOtp").onclick = () => {
        const val = $("otpInput").value.trim();
        if (Date.now() > exp) return Swal.fire("‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤", "OTP ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß", "error");
        if (val !== otp) return Swal.fire("‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î", "OTP ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á", "error");
        $("step-otp").style.display = "none";
        $("step-newpass").style.display = "block";
      };

      $("btnResetPass").onclick = () => {
        const np = $("newPassword").value.trim();
        if (np.length < 6) return Swal.fire("‚ö†Ô∏è", "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£", "warning");
        const users = loadUsers();
        const user = users.find(u => u.email === otpEmail);
        if (!user) return Swal.fire("‚ùå", "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ", "error");
        user.password_hash = hash(np);
        saveUsers(users);
        Swal.fire("‚úÖ", "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", "success").then(() => switchView("view-login"));
      };

      $("resendOtp").onclick = () => {
        otp = (Math.floor(Math.random() * 900000) + 100000).toString();
        exp = Date.now() + 5 * 60 * 1000;
        Swal.fire("üì© ‡∏™‡πà‡∏á OTP ‡πÉ‡∏´‡∏°‡πà", `<b>${otp}</b><br><small>‡∏°‡∏µ‡∏≠‡∏≤‡∏¢‡∏∏ 5 ‡∏ô‡∏≤‡∏ó‡∏µ</small>`, "info");
      };

      const togglePw = (input, btn) => {
        const isHidden = input.type === "password";
        input.type = isHidden ? "text" : "password";
        btn.textContent = isHidden ? "‡∏ã‡πà‡∏≠‡∏ô" : "‡πÅ‡∏™‡∏î‡∏á";
      };
      $("toggleLoginPw").onclick = () => togglePw($("loginPassword"), $("toggleLoginPw"));
      $("toggleRegPw").onclick = () => togglePw($("regPassword"), $("toggleRegPw"));
      $("toggleNewPw").onclick = () => togglePw($("newPassword"), $("toggleNewPw"));

      $("toRegister").onclick = () => switchView("view-register");
      $("toForgot").onclick = () => {
        $("step-email").style.display = "block";
        $("step-otp").style.display = "none";
        $("step-newpass").style.display = "none";
        switchView("view-forgot");
      };
      ["backToLogin1", "backToLogin2", "backToLogin3"].forEach(id => {
        $(id).onclick = () => switchView("view-login");
      });
    })();
  </script>
</body>
</html>

<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå | Part-time Match</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    body {
      margin:0; padding:0; background:#eef1f9;
      font-family:"Prompt", sans-serif;
      display:flex;
      height:100vh;
      overflow:hidden;
    }

    /* ---------------- Sidebar ---------------- */
    .sidebar {
      width:240px; background:#ffffff;
      border-right:1px solid #dfe3ef;
      padding:20px 0;
      display:flex; flex-direction:column;
    }

    .logo {
      font-size:20px; font-weight:600; text-align:center;
      color:#444; margin-bottom:24px;
    }

    .menu {
      display:flex; flex-direction:column;
      gap:6px; padding:0 16px;
    }

    .menu a {
      padding:10px 14px;
      text-decoration:none;
      color:#555;
      font-size:15px;
      border-radius:8px;
      transition:0.2s;
    }

    .menu a.active {
      background:#eef2ff;
      color:#4c55d9;
      font-weight:600;
    }

    .menu a:hover { background:#f4f5ff; }

    .logout-area {
      margin-top:auto;
      padding:20px;
    }

    .btn-logout {
      width:100%; border:none; padding:10px;
      background:#d9534f; color:#fff; border-radius:8px;
      cursor:pointer; font-size:14px;
    }

    /* -------------- Main -------------- */
    .main {
      flex:1; overflow-y:auto;
      padding:30px 40px;
    }

    .page-title {
      font-size:26px; color:#222; margin:0;
      font-weight:600;
    }
    .subtitle {
      color:#666; margin-top:4px; font-size:14px;
    }

    /* -------------- Profile Card -------------- */
    .profile-card {
      margin-top:24px;
      background:#fff;
      border-radius:16px;
      box-shadow:0 4px 14px rgba(0,0,0,0.08);
      padding:24px;
      max-width:700px;
    }

    .profile-header {
      display:flex; align-items:center; gap:20px;
    }

    .avatar {
      width:110px; height:110px;
      border-radius:16px; object-fit:cover;
      background:#e4e7ff;
    }

    .btn-change-img {
      background:#ffffff;
      border:1px solid #cfd3ef;
      padding:7px 14px; cursor:pointer;
      border-radius:8px;
      font-size:14px;
      color:#4c55d9;
    }

    .form-group {
      margin-top:18px;
      display:flex; flex-direction:column;
      font-size:14px;
    }

    .form-group label { margin-bottom:6px; color:#444; }
    .form-group input,
    .form-group select,
    .form-group textarea {
      padding:10px;
      border-radius:8px;
      border:1px solid #cfd3ef;
      font-size:14px;
      background:#f9faff;
    }

    #map {
      width:100%; height:260px;
      border-radius:12px;
      margin-top:10px;
    }

    .btn-save {
      margin-top:22px;
      width:100%;
      background:linear-gradient(90deg,#667eea,#764ba2);
      border:none; color:#fff;
      padding:12px; border-radius:28px;
      cursor:pointer; font-size:15px;
      font-weight:600;
    }
  </style>
</head>

<body>

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="logo">Part-time Match</div>

    <div class="menu">
      <a href="profile.html" class="active">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a>
      <a href="jobs.html">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏á‡∏≤‡∏ô</a>
      <a href="applications.html">‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</a>
      <a href="matching.html">AI Matching</a>
      <a href="reviews.html">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</a>
    </div>

    <div class="logout-area">
      <button id="logoutBtn" class="btn-logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>
  </div>

  <!-- Main -->
  <div class="main">
    <h2 class="page-title">üë§ ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
    <p class="subtitle">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>

    <div class="profile-card">

      <!-- PROFILE PICTURE -->
      <div class="profile-header">
        <img id="avatarPreview" class="avatar" src="./img/default-profile.png" alt="avatar">
        <div>
          <input type="file" id="avatarInput" accept="image/*" style="display:none;">
          <button class="btn-change-img" onclick="document.getElementById('avatarInput').click();">
            ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
          </button>
        </div>
      </div>

      <!-- FORM FIELDS -->
      <div class="form-group">
        <label>‡∏ä‡∏∑‡πà‡∏≠ ‚Äì ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
        <input id="fullname" type="text">
      </div>

      <div class="form-group">
        <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
        <input id="email" type="email">
      </div>

      <div class="form-group">
        <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label>
        <input id="phone" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô 0912345678">
      </div>

      <div class="form-group">
        <label>‡πÄ‡∏û‡∏®</label>
        <select id="gender">
          <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏®</option>
          <option value="‡∏ä‡∏≤‡∏¢">‡∏ä‡∏≤‡∏¢</option>
          <option value="‡∏´‡∏ç‡∏¥‡∏á">‡∏´‡∏ç‡∏¥‡∏á</option>
          <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
        </select>
      </div>

      <div class="form-group">
        <label>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</label>
        <input id="birthday" type="date">
      </div>

      <div class="form-group">
        <label>‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
        <input id="address" type="text" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏î‡∏¢‡∏¢‡πà‡∏≠ ‡πÄ‡∏ä‡πà‡∏ô ‡∏ö‡∏≤‡∏á‡πÄ‡∏Ç‡∏ô ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø">
      </div>

      <div class="form-group">
        <label>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</label>
        <div id="map"></div>
      </div>

      <div class="form-group">
        <label>‡∏ó‡∏±‡∏Å‡∏©‡∏∞</label>
        <textarea id="skills" rows="3"></textarea>
      </div>

      <div class="form-group">
        <label>‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå</label>
        <textarea id="experience" rows="3"></textarea>
      </div>

      <button class="btn-save" id="saveProfileBtn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  const SESSION_SEEKER = "pt_seeker_session";

  /* ----------------------------------------
      üîê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
  ---------------------------------------- */
  const seekerEmail = localStorage.getItem(SESSION_SEEKER);

  if (!seekerEmail) {
    Swal.fire({
      icon: "warning",
      title: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô",
      text: "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
      confirmButtonText: "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö",
      allowOutsideClick: false,
      allowEscapeKey: false
    }).then(() => {
      location.href = "../auth.html";
    });
  }

  /* ----------------------------------------
      GOOGLE MAP
  ---------------------------------------- */
  let map, marker;

  function initMap() {
    const defaultPos = { lat: 13.7563, lng: 100.5018 };

    map = new google.maps.Map(document.getElementById("map"), {
      center: defaultPos,
      zoom: 13,
    });

    marker = new google.maps.Marker({
      position: defaultPos,
      map: map,
      draggable: true
    });
  }

  /* ----------------------------------------
      ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
  ---------------------------------------- */
  document.getElementById("avatarInput").addEventListener("change", function(){
    const file = this.files[0];
    if (!file) return;
    document.getElementById("avatarPreview").src = URL.createObjectURL(file);
  });

  /* ----------------------------------------
      ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠ Login ‡πÅ‡∏•‡πâ‡∏ß)
  ---------------------------------------- */
  window.onload = () => {
    const saved = JSON.parse(localStorage.getItem("profileData") || "{}");
    for (let id in saved) {
      if (document.getElementById(id)) {
        document.getElementById(id).value = saved[id];
      }
    }
  };

  /* ----------------------------------------
      ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
  ---------------------------------------- */
  document.getElementById("saveProfileBtn").addEventListener("click", () => {
    const profileData = {
      fullname: fullname.value,
      email: email.value,
      phone: phone.value,
      gender: gender.value,
      birthday: birthday.value,
      address: address.value,
      skills: skills.value,
      experience: experience.value
    };

    localStorage.setItem("profileData", JSON.stringify(profileData));

    Swal.fire({
      icon: "success",
      title: "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß",
      confirmButtonColor: "#4c55d9"
    });
  });

  /* ----------------------------------------
      Logout
  ---------------------------------------- */
  document.getElementById("logoutBtn").addEventListener("click", () => {
    Swal.fire({
      icon:"warning",
      title:"‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?",
      showCancelButton:true,
      confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",
      confirmButtonColor:"#d9534f"
    }).then(res=>{
      if(res.isConfirmed){
        localStorage.removeItem(SESSION_SEEKER);
        window.location.href="login.html";
      }
    });
  });
</script>

<!-- GOOGLE MAP API -->
<script async
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBhOq2e2YYl308urG4HnTDRr4pqKdv8jhE&callback=initMap">
</script>

</body>
</html>

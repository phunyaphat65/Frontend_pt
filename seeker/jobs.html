<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>üßæ ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏á‡∏≤‡∏ô | Part-time Match</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="../common/css/style.css">

  <style>
    body {
      font-family: "Prompt", sans-serif;
      background: #f6f8fc;
      margin: 0;
      min-height: 100vh;
    }

    /* üîπ Navbar */
    nav.navbar {
      background: linear-gradient(90deg, #667eea, #764ba2);
      color: #fff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 24px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }
    .navbar .nav-right a {
      color: white;
      text-decoration: none;
      margin-right: 18px;
      font-weight: 500;
      transition: opacity .2s;
    }
    .navbar .nav-right a:hover { opacity: 0.8; }
    .btn-logout {
      background: rgba(255,255,255,0.25);
      border: none;
      color: white;
      padding: 8px 14px;
      border-radius: 8px;
      cursor: pointer;
    }
    .btn-logout:hover { background: rgba(255,255,255,0.35); }

    /* üîπ Section */
    .container {
      max-width: 1000px;
      margin: 40px auto;
      padding: 0 20px;
    }

    h2 {
      margin-bottom: 15px;
      color: #333;
    }

    /* üîç Search Section */
    .search-section .search-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .search-bar input, .search-bar select {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
    }
    .btn-primary {
      background: linear-gradient(90deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    .btn-primary:hover { opacity: 0.9; }

    /* üßæ Job list */
    .job-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .job-card {
      background: #fff;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      border: 1px solid #e2e8f0;
      transition: 0.3s;
    }
    .job-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
    }
    .job-card h4 {
      margin: 0 0 8px;
      color: #333;
    }
    .job-card p {
      margin: 4px 0;
      font-size: 14px;
      color: #555;
    }

    /* üó∫Ô∏è Map */
    #map {
      height: 400px;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.08);
      margin-top: 15px;
    }

    /* Modal */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.5);
      z-index: 999;
      visibility: hidden;
      opacity: 0;
      transition: 0.3s;
    }
    .modal.active { visibility: visible; opacity: 1; }
    .modal-content {
      background: #fff;
      border-radius: 12px;
      padding: 25px;
      width: 90%;
      max-width: 450px;
      position: relative;
      animation: popIn 0.3s ease;
    }
    @keyframes popIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .close-btn {
      position: absolute;
      top: 10px; right: 15px;
      font-size: 24px;
      color: #999;
      cursor: pointer;
    }
    .close-btn:hover { color: #333; }
  </style>
</head>

<body>
  <!-- üîπ Navbar -->
  <nav class="navbar">
    <div class="nav-left">
      <h1>Part-time Match</h1>
    </div>
    <div class="nav-right">
      <a href="profile.html">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a>
      <a href="jobs.html" style="font-weight:600;text-decoration:underline;">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏á‡∏≤‡∏ô</a>
      <a href="applications.html">‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£</a>
      <a href="matching.html">‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</a>
      <a href="reviews.html">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</a>
      <button id="logoutBtn" class="btn-logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>
  </nav>

  <!-- üîç Search -->
  <section class="container search-section">
    <h2>üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</h2>
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏£‡πâ‡∏≤‡∏ô...">
      <select id="categoryFilter">
        <option value="">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
        <option value="‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
        <option value="‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏µ‡∏Å">‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏µ‡∏Å</option>
        <option value="‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
        <option value="‡∏Ç‡∏ô‡∏™‡πà‡∏á">‡∏Ç‡∏ô‡∏™‡πà‡∏á</option>
      </select>
      <button id="searchBtn" class="btn-primary">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
    </div>
  </section>

  <!-- üßæ Job list -->
  <section class="container job-list-section">
    <h2>üßæ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
    <div id="jobsList" class="job-list"></div>
    <p id="emptyText" class="empty-text" style="display:none;">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>
  </section>

  <!-- üó∫Ô∏è Map -->
  <section class="container map-section">
    <h2>üó∫Ô∏è ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô</h2>
    <div id="map"></div>
  </section>

  <!-- üìã Modal -->
  <div id="jobModal" class="modal">
    <div class="modal-content">
      <span id="closeJobModal" class="close-btn">&times;</span>
      <h3 id="jobTitle"></h3>
      <p><strong>‡∏£‡πâ‡∏≤‡∏ô:</strong> <span id="shopName"></span></p>
      <p><strong>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà:</strong> <span id="jobCategory"></span></p>
      <p><strong>‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á:</strong> <span id="jobWage"></span> ‡∏ö‡∏≤‡∏ó/‡∏ä‡∏°.</p>
      <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô:</strong> <span id="jobStartDate"></span></p>
      <p><strong>‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á:</strong> <span id="jobLocation"></span></p>
      <p><strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong></p>
      <p id="jobDesc"></p>
      <button id="applyBtn" class="btn-primary">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ</button>
    </div>
  </div>

  <!-- ‚úÖ Scripts -->
  <script src="../common/js/storage.js"></script>
  <script src="../common/js/utils.js"></script>
  <script src="../common/js/map.js"></script>
  <script src="./js/jobs.js"></script>

  <script>
    // ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö session
    const SESSION_SEEKER = "pt_seeker_session";
    const email = localStorage.getItem(SESSION_SEEKER);

    if (!email) {
      alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
      window.location.href = "../auth.html";
    }

    // üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
    document.getElementById("logoutBtn").addEventListener("click", () => {
      if (confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
        localStorage.removeItem(SESSION_SEEKER);
        window.location.href = "../auth.html";
      }
    });
  </script>

  <!-- üåç Google Map -->
  <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBhOq2e2YYl308urG4HnTDRr4pqKdv8jhE&callback=initMap"> </script>
</body>
</html>
